<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Submission</title>
    <link rel="stylesheet" href="submissionform.css">
</head>
<body>
    <h1 id="form-title">Coffee Recipe Submission</h1>
    <p>Please fill out this form to submit your own coffee recipe</p>
    <form action="" method="post">
        <fieldset id="personal-info">
            <legend>Personal Information</legend>
            <label for="first-name">First Name: <input id="first-name" type="text" required></label>
            <label for="last-name">Last Name: <input id="first-name" type="text" required></label>
            <label for="email">Email Address: <input id="email address" type="text" required></label>
        </fieldset>
        <fieldset id="recipe-info">
            <legend>Recipe Information</legend>
            <label for="recipe-name">Recipe Name: <input id="recipe-name" type="text" required>
            </label>
            <label for="recipe-type">Recipe Type: <select id="recipe-type" required>
                <option value="hot">Hot</option>
                <option value="cold">Cold</option>
                <option value="frozen">Frozen</option>
            </select></label>
            <label for="recipe-description">Recipe Description: <textarea id="recipe-description" required></textarea></label>

            <label for="recipe-ingredients">Recipe Ingredients: <textarea id="recipe-ingredients" required></textarea></label>
            <label for="recipe-instructions">Recipe Instructions: <textarea id="recipe-instructions" required></textarea></label>
            <label>Upload an image of your coffee: <input type="file" id="corresponding coffee image" for="profile-picture"/></label>
        </fieldset>
        <fieldset>
            <label>
                <input id="recipe-submission" type="checkbox" required /> I agree to allow my recipe to be published for others to see.
              </label>
        </fieldset>
        <button type="submit">Submit Recipe</button>

        <script>
            const form = document.querySelector('form');
            form.addEventListener('submit', (event) => {
                event.preventDefault();
                
                
                const formData = {
                    firstName: document.getElementById('first-name').value,
                    lastName: document.getElementById('last-name').value,
                    email: document.getElementById('email').value,
                    recipeName: document.getElementById('recipe-name').value,
                    recipeType: document.getElementById('recipe-type').value,
                    recipeDescription: document.getElementById('recipe-description').value,
                    recipeIngredients: document.getElementById('recipe-ingredients').value,
                    recipeInstructions: document.getElementById('recipe-instructions').value,
                    recipeSubmission: document.getElementById('recipe-submission').checked
                };

                try {
                    const response = await fetch('http://localhost:3000/recipes', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(formData)
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        alert('Recipe submitted successfully!');
                    } else {
                        alert('Failed to submit recipe');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('Failed to submit recipe');
                }
            });
        </script>
</body>
</html>